<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 5.5.2">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>JavaFX tutorial part 4 – Using FXML</title> <link rel="stylesheet" href="/guides/markbind/css/bootstrap.min.css"> <link rel="stylesheet" href="/guides/markbind/fontawesome/css/all.min.css"><link rel="stylesheet" href="/guides/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/guides/markbind/css/markbind.min.css"><link rel="stylesheet" href="/guides/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/guides/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/guides/css/main.css">
<link rel="icon" href="/guides/favicon.ico"></head>
<script>
  const baseUrl = '/guides'
</script>
<body  data-bs-spy="scroll" data-bs-target="#mb-page-nav" data-bs-offset="100" >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-7c0fd418><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-7c0fd418><div class="container-fluid" data-v-7c0fd418><div class="navbar-left" data-v-7c0fd418><a href="https://se-education.org" title="SE-EDU" class="navbar-brand" data-v-7c0fd418><span data-v-7c0fd418><span aria-hidden="true" class="fas fa-chevron-circle-left" data-v-7c0fd418></span> <strong data-v-7c0fd418><strong data-v-7c0fd418>SE-EDU</strong></strong></span></a></div> <div class="navbar-default" data-v-7c0fd418><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-7c0fd418> <li data-v-7c0fd418><a href="/guides/index.html" class="nav-link" data-v-7c0fd418><span data-v-7c0fd418><strong data-v-7c0fd418>Home</strong></span></a></li> <li data-v-7c0fd418><a href="/guides/about.html" class="nav-link" data-v-7c0fd418><span data-v-7c0fd418><strong data-v-7c0fd418>About</strong></span></a></li> <li data-v-7c0fd418><a href="https://github.com/se-edu/guides" class="nav-link" data-v-7c0fd418><span data-v-7c0fd418><span aria-hidden="true" class="fab fa-github" data-v-7c0fd418></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-7c0fd418><li class="nav-link" data-v-7c0fd418><form class="navbar-form" data-v-7c0fd418><div class="dropdown" style="position:relative;" data-v-cea1a814><input data-bs-toggle="dropdown" type="text" placeholder="Search this site" autocomplete="off" value="" class="form-control" data-v-cea1a814> <div class="form-control placeholder-div-hidden" data-v-cea1a814>
      Search this site
    </div> <ul class="dropdown-menu search-dropdown-menu d-none dropdown-menu-end" data-v-cea1a814></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-7c0fd418><!----> <!----></div></div></header> <div id="flex-body"><div id="content-wrapper" class="fixed-header-padding"><h1 id="guides-for-se-student-projects"><span class="text-dark"><strong><strong>Guides for SE student projects »</strong></strong></span><a href="#guides-for-se-student-projects" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p></p><h1 id="javafx-tutorial-part-4-using-fxml">JavaFX tutorial part 4 – Using FXML<a href="#javafx-tutorial-part-4-using-fxml" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>While we have produced a fully functional prototype, there are a few major problems with our application.</p> <ol><li><p>The process of visually enhancing the GUI is long and painful:</p> <ul><li>Does the <code class="hljs inline no-lang">TextField</code> need to be 330px or 325px wide?</li> <li>How much padding is enough padding to look good?</li></ul> <p>Every small change requires us to rebuild and run the application.</p></li> <li><p>Components are heavily dependent on each other:
Why does <code class="hljs inline no-lang">Main</code> need to know that <code class="hljs inline no-lang">DialogBox</code> needs a <code class="hljs inline no-lang">Label</code>?
What happens if we change the <code class="hljs inline no-lang">Label</code> to a custom <code class="hljs inline no-lang">ColoredLabel</code> in the future?</p> <p>We need to minimize the amount of information each control needs to know about another.
Otherwise, making changes in the future will break existing features.</p></li> <li><p>The code is untidy and long:
Why is all the code in one place?</p> <p>The <code class="hljs inline no-lang">Main</code> class attempts to do it all.
Code for visual tweaks, listeners and even utility methods are all in one file.
This makes it difficult to find and make changes to existing code.</p></li></ol> <p>FXML is a XML-based language that allows us to define our user interface. Properties of JavaFX objects can be defined in the FXML file. For example:</p> <pre><code class="hljs xml"><span> <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;userInput&quot;</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">&quot;558.0&quot;</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">&quot;#handleUserInput&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;41.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;324.0&quot;</span> <span class="hljs-attr">AnchorPane.bottomAnchor</span>=<span class="hljs-string">&quot;1.0&quot;</span> /&gt;</span>
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><p>The FXML snippet define a TextField similar to the one that we programmatically defined previous in Tutorial 2. Notice how concise FXML is compared to the plain Java version.</p> <p>Let's return to Duke and convert it to use FXML instead.</p> <h1 id="rebuilding-the-scene-using-fxml">Rebuilding the Scene using FXML<a href="#rebuilding-the-scene-using-fxml" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <p>Scene Builder is a tool developed by Oracle and currently maintained by Gluon. It is a What-You-See-Is-What-You-Get GUI creation tool. <a href="https://gluonhq.com/products/scene-builder/#download">Download</a> the appropriate version for your OS and install it.</p> <p>Create the following files in <code class="hljs inline no-lang">src/main/resources/view</code>:</p> <p><strong>MainWindow.fxml</strong></p> <pre><code class="hljs xml"><span><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span>
</span><span>&lt;?import javafx.scene.control.Button?&gt;
</span><span>&lt;?import javafx.scene.control.ScrollPane?&gt;
</span><span>&lt;?import javafx.scene.control.TextField?&gt;
</span><span>&lt;?import javafx.scene.layout.AnchorPane?&gt;
</span><span>&lt;?import javafx.scene.layout.VBox?&gt;
</span><span>
</span><span><span class="hljs-tag">&lt;<span class="hljs-name">AnchorPane</span> <span class="hljs-attr">maxHeight</span>=<span class="hljs-string">&quot;-Infinity&quot;</span> <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">&quot;-Infinity&quot;</span> <span class="hljs-attr">minHeight</span>=<span class="hljs-string">&quot;-Infinity&quot;</span> <span class="hljs-attr">minWidth</span>=<span class="hljs-string">&quot;-Infinity&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;600.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;400.0&quot;</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://javafx.com/javafx/17&quot;</span> <span class="hljs-attr">xmlns:fx</span>=<span class="hljs-string">&quot;http://javafx.com/fxml/1&quot;</span> <span class="hljs-attr">fx:controller</span>=<span class="hljs-string">&quot;MainWindow&quot;</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">children</span>&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;userInput&quot;</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">&quot;558.0&quot;</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">&quot;#handleUserInput&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;41.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;324.0&quot;</span> <span class="hljs-attr">AnchorPane.bottomAnchor</span>=<span class="hljs-string">&quot;1.0&quot;</span> /&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;sendButton&quot;</span> <span class="hljs-attr">layoutX</span>=<span class="hljs-string">&quot;324.0&quot;</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">&quot;558.0&quot;</span> <span class="hljs-attr">mnemonicParsing</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">&quot;#handleUserInput&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;41.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;76.0&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Send&quot;</span> /&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">ScrollPane</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;scrollPane&quot;</span> <span class="hljs-attr">hbarPolicy</span>=<span class="hljs-string">&quot;NEVER&quot;</span> <span class="hljs-attr">hvalue</span>=<span class="hljs-string">&quot;1.0&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;557.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;400.0&quot;</span> <span class="hljs-attr">vvalue</span>=<span class="hljs-string">&quot;1.0&quot;</span>&gt;</span>
</span><span>      <span class="hljs-tag">&lt;<span class="hljs-name">content</span>&gt;</span>
</span><span>        <span class="hljs-tag">&lt;<span class="hljs-name">VBox</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;dialogContainer&quot;</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">&quot;552.0&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;388.0&quot;</span> /&gt;</span>
</span><span>      <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span>
</span><span>    <span class="hljs-tag">&lt;/<span class="hljs-name">ScrollPane</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">children</span>&gt;</span>
</span><span><span class="hljs-tag">&lt;/<span class="hljs-name">AnchorPane</span>&gt;</span>
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><div class="alert box-container seamless" data-v-6607c59e><!----> <div class="header-and-body" data-v-6607c59e><!----> <div class="box-body-wrapper" data-v-6607c59e><div class="icon-wrapper  text-danger" data-v-6607c59e><i class="fas fa-flag" data-v-6607c59e></i></div> <div aria-hidden="true" class="vertical-divider alert-danger" data-v-6607c59e></div> <div class="contents" data-v-6607c59e><p data-v-6607c59e>Note that if you are using packages, <code class="hljs inline no-lang" data-v-6607c59e>fx:controller=&quot;MainWindow&quot;</code> needs to be updated accordingly e.g., <code class="hljs inline no-lang" data-v-6607c59e>fx:controller=&quot;seedu.duke.MainWindow&quot;</code></p></div> <!----></div></div></div> <p><strong>DialogBox.fxml</strong></p> <pre><code class="hljs xml"><span><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span>
</span><span>&lt;?import javafx.geometry.Insets?&gt;
</span><span>&lt;?import javafx.scene.control.Label?&gt;
</span><span>&lt;?import javafx.scene.image.ImageView?&gt;
</span><span>&lt;?import javafx.scene.layout.HBox?&gt;
</span><span>
</span><span><span class="hljs-tag">&lt;<span class="hljs-name">fx:root</span> <span class="hljs-attr">alignment</span>=<span class="hljs-string">&quot;TOP_RIGHT&quot;</span> <span class="hljs-attr">maxHeight</span>=<span class="hljs-string">&quot;1.7976931348623157E308&quot;</span> <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">&quot;1.7976931348623157E308&quot;</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">&quot;400.0&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;javafx.scene.layout.HBox&quot;</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://javafx.com/javafx/17&quot;</span> <span class="hljs-attr">xmlns:fx</span>=<span class="hljs-string">&quot;http://javafx.com/fxml/1&quot;</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">children</span>&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;dialog&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Label&quot;</span> <span class="hljs-attr">wrapText</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">minHeight</span>=<span class="hljs-string">&quot;-Infinity&quot;</span>/&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">&quot;displayPicture&quot;</span> <span class="hljs-attr">fitHeight</span>=<span class="hljs-string">&quot;99.0&quot;</span> <span class="hljs-attr">fitWidth</span>=<span class="hljs-string">&quot;99.0&quot;</span> <span class="hljs-attr">pickOnBounds</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">preserveRatio</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span>
</span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">children</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">padding</span>&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Insets</span> <span class="hljs-attr">bottom</span>=<span class="hljs-string">&quot;15.0&quot;</span> <span class="hljs-attr">left</span>=<span class="hljs-string">&quot;5.0&quot;</span> <span class="hljs-attr">right</span>=<span class="hljs-string">&quot;5.0&quot;</span> <span class="hljs-attr">top</span>=<span class="hljs-string">&quot;15.0&quot;</span> /&gt;</span>
</span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">padding</span>&gt;</span>
</span><span><span class="hljs-tag">&lt;/<span class="hljs-name">fx:root</span>&gt;</span>
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><div class="alert box-container seamless" data-v-6607c59e><!----> <div class="header-and-body" data-v-6607c59e><!----> <div class="box-body-wrapper" data-v-6607c59e><div class="icon-wrapper  text-info" data-v-6607c59e><i class="fas fa-info" data-v-6607c59e></i></div> <div aria-hidden="true" class="vertical-divider alert-info" data-v-6607c59e></div> <div class="contents" data-v-6607c59e><p data-v-6607c59e>Note that for <code class="hljs inline no-lang" data-v-6607c59e>Label</code>, we set <code class="hljs inline no-lang" data-v-6607c59e>wrapText</code> to <strong data-v-6607c59e>true</strong> and <code class="hljs inline no-lang" data-v-6607c59e>minHeight</code> to <strong data-v-6607c59e>-Infinity</strong>. This configuration wraps the text within the label, removes the minimum height constraint, and allows the label to grow vertically as needed.</p> <p data-v-6607c59e><a href="/guides/tutorials/images/javafx/NoOverrunDialogBox.png" target="_self" data-v-6607c59e><img src="/guides/tutorials/images/javafx/NoOverrunDialogBox.png" alt="Set minHeight for Label" class="img-fluid" data-v-6607c59e></a></p> <p data-v-6607c59e>Without setting <code class="hljs inline no-lang" data-v-6607c59e>minHeight</code> to <strong data-v-6607c59e>-Infinity</strong>, text overrun may occur when the text to be displayed exceeds the size of the label, causing the text to not be fully displayed and ending with <code class="hljs inline no-lang" data-v-6607c59e>...</code> instead.</p> <p data-v-6607c59e><a href="/guides/tutorials/images/javafx/OverrunDialogBox.png" target="_self" data-v-6607c59e><img src="/guides/tutorials/images/javafx/OverrunDialogBox.png" alt="No minHeight for Label" class="img-fluid" data-v-6607c59e></a></p></div> <!----></div></div></div> <ol><li><p>Let’s explore the provided FXML files in Scene Builder.</p> <p>Running the tool brings up the main screen.
Select <code class="hljs inline no-lang">Open Project</code> &gt; <code class="hljs inline no-lang">src/main/resources/view/MainWindow.fxml</code>. Inspect each control and its properties.</p> <p><a href="/guides/tutorials/images/javafx/SceneBuilder.png" target="_self"><img src="/guides/tutorials/images/javafx/SceneBuilder.png" alt="SceneBuilder opening MainWindow.fxml" class="img-fluid"></a></p></li> <li><p>On the right accordion pane, you can modify the properties of the control that you have selected. Try changing the various settings and see what they do!</p></li> <li><p>On the left accordion, you can see that we have set the controller class to <code class="hljs inline no-lang">MainWindow</code>.
We will get to that later.</p> <p><a href="/guides/tutorials/images/javafx/MainWindowController.png" target="_self"><img src="/guides/tutorials/images/javafx/MainWindowController.png" alt="Controller for MainWindow" class="img-fluid"></a></p></li> <li><p>Let’s repeat the process for <code class="hljs inline no-lang">DialogBox</code>.
The main difference here is that DialogBox ticks <code class="hljs inline no-lang">Use fx:root construct</code> and <em>does not define a controller class</em>. Ticking this enables the use of the <code class="hljs inline no-lang">fx:root</code> element, allowing you to reference a root element predefined by calling the <code class="hljs inline no-lang">setRoot()</code> method. The controller can be programatically set using the <code class="hljs inline no-lang">setController()</code> method.</p> <p>More about <code class="hljs inline no-lang">fx:root</code> on the documentation <a href="https://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#root_elements">Introduction to FXML | JavaFX 2.2</a>.</p> <p><a href="/guides/tutorials/images/javafx/DialogBoxController.png" target="_self"><img src="/guides/tutorials/images/javafx/DialogBoxController.png" alt="Settings for DialogBox" class="img-fluid"></a></p></li></ol> <h2 id="using-controllers">Using Controllers<a href="#using-controllers" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>As part of the effort to separate the code handling Duke's logic and UI, let's <em>refactor</em> the UI-related code to its own class.
We call these UI classes <em>controllers</em>.</p> <p>Let's implement the <code class="hljs inline no-lang">MainWindow</code> controller class that we specified in <code class="hljs inline no-lang">MainWindow.fxml</code>.</p> <p><strong>MainWindow.java</strong></p> <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> javafx.fxml.FXML;
</span><span><span class="hljs-keyword">import</span> javafx.scene.control.Button;
</span><span><span class="hljs-keyword">import</span> javafx.scene.control.ScrollPane;
</span><span><span class="hljs-keyword">import</span> javafx.scene.control.TextField;
</span><span><span class="hljs-keyword">import</span> javafx.scene.image.Image;
</span><span><span class="hljs-keyword">import</span> javafx.scene.layout.AnchorPane;
</span><span><span class="hljs-keyword">import</span> javafx.scene.layout.VBox;
</span><span><span class="hljs-comment">/**</span>
</span><span><span class="hljs-comment"> * Controller for MainWindow. Provides the layout for the other controls.</span>
</span><span><span class="hljs-comment"> */</span>
</span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainWindow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AnchorPane</span> </span>{
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> ScrollPane scrollPane;
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> VBox dialogContainer;
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> TextField userInput;
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> Button sendButton;
</span><span>
</span><span>    <span class="hljs-keyword">private</span> Duke duke;
</span><span>
</span><span>    <span class="hljs-keyword">private</span> Image userImage = <span class="hljs-keyword">new</span> Image(<span class="hljs-keyword">this</span>.getClass().getResourceAsStream(<span class="hljs-string">&quot;/images/DaUser.png&quot;</span>));
</span><span>    <span class="hljs-keyword">private</span> Image dukeImage = <span class="hljs-keyword">new</span> Image(<span class="hljs-keyword">this</span>.getClass().getResourceAsStream(<span class="hljs-string">&quot;/images/DaDuke.png&quot;</span>));
</span><span>
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{
</span><span>        scrollPane.vvalueProperty().bind(dialogContainer.heightProperty());
</span><span>    }
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDuke</span><span class="hljs-params">(Duke d)</span> </span>{
</span><span>        duke = d;
</span><span>    }
</span><span>
</span><span>    <span class="hljs-comment">/**</span>
</span><span><span class="hljs-comment">     * Creates two dialog boxes, one echoing user input and the other containing Duke's reply and then appends them to</span>
</span><span><span class="hljs-comment">     * the dialog container. Clears the user input after processing.</span>
</span><span><span class="hljs-comment">     */</span>
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">()</span> </span>{
</span><span>        String input = userInput.getText();
</span><span>        String response = duke.getResponse(input);
</span><span>        dialogContainer.getChildren().addAll(
</span><span>                DialogBox.getUserDialog(input, userImage),
</span><span>                DialogBox.getDukeDialog(response, dukeImage)
</span><span>        );
</span><span>        userInput.clear();
</span><span>    }
</span><span>}
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><p>The <code class="hljs inline no-lang">@FXML</code> annotation marks a <code class="hljs inline no-lang">private</code> or <code class="hljs inline no-lang">protected</code> member and makes it accessible to FXML despite its modifier.
Without the annotation, we will have to make everything <code class="hljs inline no-lang">public</code> and expose our UI to unwanted changes.</p> <p>The <code class="hljs inline no-lang">FXMLLoader</code> will map a control with a <code class="hljs inline no-lang">fx:id</code> defined in FXML to a variable with the same name in its controller.
Notice how in <code class="hljs inline no-lang">MainWindow</code>, we can invoke <code class="hljs inline no-lang">TextField#clear()</code> on <code class="hljs inline no-lang">userInput</code> and access its content just as we did in the previous example.
Similarly, methods like private methods like <code class="hljs inline no-lang">handleUserInput</code> can be used in FXML when annotated by <code class="hljs inline no-lang">@FXML</code>.</p> <h2 id="using-fxml-in-our-application">Using FXML in our application<a href="#using-fxml-in-our-application" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Let's create a new <code class="hljs inline no-lang">Main</code> class as the bridge between the existing logic in <code class="hljs inline no-lang">Duke</code> and the UI in <code class="hljs inline no-lang">MainWindow</code>.</p> <p><strong>Main.java</strong></p> <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> java.io.IOException;
</span><span>
</span><span><span class="hljs-keyword">import</span> javafx.application.Application;
</span><span><span class="hljs-keyword">import</span> javafx.fxml.FXMLLoader;
</span><span><span class="hljs-keyword">import</span> javafx.scene.Scene;
</span><span><span class="hljs-keyword">import</span> javafx.scene.layout.AnchorPane;
</span><span><span class="hljs-keyword">import</span> javafx.stage.Stage;
</span><span>
</span><span><span class="hljs-comment">/**</span>
</span><span><span class="hljs-comment"> * A GUI for Duke using FXML.</span>
</span><span><span class="hljs-comment"> */</span>
</span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{
</span><span>
</span><span>    <span class="hljs-keyword">private</span> Duke duke = <span class="hljs-keyword">new</span> Duke();
</span><span>
</span><span>    <span class="hljs-meta">@Override</span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start</span><span class="hljs-params">(Stage stage)</span> </span>{
</span><span>        <span class="hljs-keyword">try</span> {
</span><span>            FXMLLoader fxmlLoader = <span class="hljs-keyword">new</span> FXMLLoader(Main.class.getResource(<span class="hljs-string">&quot;/view/MainWindow.fxml&quot;</span>));
</span><span>            AnchorPane ap = fxmlLoader.load();
</span><span>            Scene scene = <span class="hljs-keyword">new</span> Scene(ap);
</span><span>            stage.setScene(scene);
</span><span>            fxmlLoader.&lt;MainWindow&gt;getController().setDuke(duke);
</span><span>            stage.show();
</span><span>        } <span class="hljs-keyword">catch</span> (IOException e) {
</span><span>            e.printStackTrace();
</span><span>        }
</span><span>    }
</span><span>}
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><p>Again, we can interact with the <code class="hljs inline no-lang">AnchorPane</code> defined in the FXML as we would have if we created the <code class="hljs inline no-lang">AnchorPane</code> ourselves.</p> <p>For our custom <code class="hljs inline no-lang">DialogBox</code>, we did not define a controller so let's create a controller for it.</p> <p><strong>DialogBox.java</strong></p> <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> java.io.IOException;
</span><span><span class="hljs-keyword">import</span> java.util.Collections;
</span><span>
</span><span><span class="hljs-keyword">import</span> javafx.collections.FXCollections;
</span><span><span class="hljs-keyword">import</span> javafx.collections.ObservableList;
</span><span><span class="hljs-keyword">import</span> javafx.fxml.FXML;
</span><span><span class="hljs-keyword">import</span> javafx.fxml.FXMLLoader;
</span><span><span class="hljs-keyword">import</span> javafx.geometry.Pos;
</span><span><span class="hljs-keyword">import</span> javafx.scene.Node;
</span><span><span class="hljs-keyword">import</span> javafx.scene.control.Label;
</span><span><span class="hljs-keyword">import</span> javafx.scene.image.Image;
</span><span><span class="hljs-keyword">import</span> javafx.scene.image.ImageView;
</span><span><span class="hljs-keyword">import</span> javafx.scene.layout.HBox;
</span><span>
</span><span><span class="hljs-comment">/**</span>
</span><span><span class="hljs-comment"> * An example of a custom control using FXML.</span>
</span><span><span class="hljs-comment"> * This control represents a dialog box consisting of an ImageView to represent the speaker's face and a label</span>
</span><span><span class="hljs-comment"> * containing text from the speaker.</span>
</span><span><span class="hljs-comment"> */</span>
</span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DialogBox</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HBox</span> </span>{
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> Label dialog;
</span><span>    <span class="hljs-meta">@FXML</span>
</span><span>    <span class="hljs-keyword">private</span> ImageView displayPicture;
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">DialogBox</span><span class="hljs-params">(String text, Image img)</span> </span>{
</span><span>        <span class="hljs-keyword">try</span> {
</span><span>            FXMLLoader fxmlLoader = <span class="hljs-keyword">new</span> FXMLLoader(MainWindow.class.getResource(<span class="hljs-string">&quot;/view/DialogBox.fxml&quot;</span>));
</span><span>            fxmlLoader.setController(<span class="hljs-keyword">this</span>);
</span><span>            fxmlLoader.setRoot(<span class="hljs-keyword">this</span>);
</span><span>            fxmlLoader.load();
</span><span>        } <span class="hljs-keyword">catch</span> (IOException e) {
</span><span>            e.printStackTrace();
</span><span>        }
</span><span>
</span><span>        dialog.setText(text);
</span><span>        displayPicture.setImage(img);
</span><span>    }
</span><span>
</span><span>    <span class="hljs-comment">/**</span>
</span><span><span class="hljs-comment">     * Flips the dialog box such that the ImageView is on the left and text on the right.</span>
</span><span><span class="hljs-comment">     */</span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">flip</span><span class="hljs-params">()</span> </span>{
</span><span>        ObservableList&lt;Node&gt; tmp = FXCollections.observableArrayList(<span class="hljs-keyword">this</span>.getChildren());
</span><span>        Collections.reverse(tmp);
</span><span>        getChildren().setAll(tmp);
</span><span>        setAlignment(Pos.TOP_LEFT);
</span><span>    }
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DialogBox <span class="hljs-title">getUserDialog</span><span class="hljs-params">(String text, Image img)</span> </span>{
</span><span>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DialogBox(text, img);
</span><span>    }
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DialogBox <span class="hljs-title">getDukeDialog</span><span class="hljs-params">(String text, Image img)</span> </span>{
</span><span>        <span class="hljs-keyword">var</span> db = <span class="hljs-keyword">new</span> DialogBox(text, img);
</span><span>        db.flip();
</span><span>        <span class="hljs-keyword">return</span> db;
</span><span>    }
</span><span>}
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><p>When we create a new instance of <code class="hljs inline no-lang">DialogBox</code>, we set both the controller and root Node to <code class="hljs inline no-lang">DialogBox</code>.
From this point onwards we can interact with <code class="hljs inline no-lang">DialogBox</code> as we have in the previous tutorials.</p> <p>The last change that we have to make is to point our <code class="hljs inline no-lang">Launcher</code> class in the right direction:
In <code class="hljs inline no-lang">Launcher.java</code></p> <pre><code class="hljs java"><span><span class="hljs-comment">//...    </span>
</span><span>Application.launch(Main.class, args);
</span><span><span class="hljs-comment">//...</span>
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn d-print-none">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><h2 id="exercises">Exercises<a href="#exercises" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <ol><li>Convert <code class="hljs inline no-lang">MainWindow</code> to use the <code class="hljs inline no-lang">fx:root</code> construct.</li> <li>Extend <code class="hljs inline no-lang">MainWindow</code> to have a <code class="hljs inline no-lang">Stage</code> as a root Node.</li> <li>Customize the appearance of the application further with CSS.</li></ol> <p><a href="/guides/tutorials/javaFxPart3.html"><span aria-hidden="true" class="fas fa-arrow-left"></span> Previous</a> | <a href="/guides/tutorials/javaFx.html"><span aria-hidden="true" class="fas fa-arrow-up"></span> <strong>ToC</strong></a> | <span class="badge rounded-pill bg-primary"><strong><span class="large">What's next?</span></strong></span> <a href="/guides/tutorials/javaFxPart5.html"><span aria-hidden="true" class="fas fa-arrow-right"></span> JavaFX tutorial part 5 - <strong>Tweaking the GUI</strong></a></p> <hr> <p><strong>Authors:</strong></p> <ul><li>Initial Version: Jeffry Lum</li></ul><p></p></div> <nav id="page-nav" class="fixed-header-padding" data-v-e6005420><div class="nav-component slim-scroll" data-v-e6005420><nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#javafx-tutorial-part-4-using-fxml" data-v-e6005420>JavaFX tutorial part 4 – Using FXML‎</a> <a class="nav-link py-1" href="#rebuilding-the-scene-using-fxml" data-v-e6005420>Rebuilding the Scene using FXML‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e6005420><a class="nav-link py-1" href="#using-controllers" data-v-e6005420>Using Controllers‎</a> <a class="nav-link py-1" href="#using-fxml-in-our-application" data-v-e6005420>Using FXML in our application‎</a> <a class="nav-link py-1" href="#exercises" data-v-e6005420>Exercises‎</a></nav> <!----></nav></div> <!----></nav> <div aria-hidden="true" class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;"><i class="fas fa-arrow-circle-up"></i></div></div> <footer><div class="text-center"><small>[Powered by <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 5.5.2</a> on Fri, 9 Aug 2024, 2:09:47 GMT+8]</small></div></footer></div>
</body><script src="/guides/markbind/js/bootstrap-utility.min.js"></script>
<script src="/guides/markbind/js/polyfill.min.js"></script>
<script src="/guides/markbind/js/vue.min.js"></script>
<script src="/guides/markbind/js/markbind.min.js"></script>
<script src="javaFxPart4.page-vue-render.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
    <script>
    function copyCodeBlock(element) {
        const pre = element.parentElement.parentElement;
        const codeElement = pre.querySelector('code');

        // create dummy text element to select() the text field
        const textElement = document.createElement('textarea');
        textElement.value = codeElement.textContent;
        document.body.appendChild(textElement);
        textElement.select();

        document.execCommand('copy');
        document.body.removeChild(textElement);
    }
    </script>
</html>
